# RASP WRF 4.1 compile

## pre install
- download & install the intel compiler

- download and install libs (jasper, png, zlib

## WRF 4.1 compile


```
git clone https://github.com/wrf-model/WRF.git

export NETCDF=/home/pj/WRF391/LIBARIES/netcdf
source /home/pj/intel/bin/ifortvars.sh intel64 
source /home/pj/intel/bin/iccvars.sh intel64
```

```
./clean -a
./compile -j 6 em_real > out.txt 2>error.txt
```

## WPS 4.1 compile

- setup enviroment

```
git clone https://github.com/wrf-model/WPS.git


export NETCDF=/home/pj/WRF391/LIBARIES/netcdf
source /home/pj/intel/bin/ifortvars.sh intel64 
source /home/pj/intel/bin/iccvars.sh intel64
```

- clean
 ```
 ./clean -a
 ```
 
 - configure
 ```
 ./configure
 <choose option 17 : intel dmpar>
```
 - edit configure.wps
  -  change:
 ```
 DM_FC               = mpif90 
 to
 DM_FC               = mpif90 -f90=$(SFC)
 
 ```
  - add the path to the compression libs, eg
 ```
COMPRESSION_LIBS    = -L/home/pj/WRF391/LIBARIES/grib2/lib/ -ljasper -lpng -lz
COMPRESSION_INC     = -I/home/pj/WRF391/LIBARIES/grib2/include/ 
 ```
 
 - compile
 ```
 ./compile
 ```

 
 
